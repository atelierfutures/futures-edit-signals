<!doctype html>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>The Futures Edit — Signals</title>
<link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

<style>
  :root{
    --bg:#ffffff; --fg:#141414; --muted:#6b7280;
    --card:#ffffff; --border:#e5e7eb; --pill:#f3f4f6; --accent:#111827;
    --shadow:0 8px 24px rgba(0,0,0,.06);
    --ctl-w:180px; --seg-w:160px;
  }
  :root.dark{
    --bg:#0b0b0c; --fg:#f2f3f5; --muted:#a3a7ae;
    --card:#121317; --border:#2b2f36; --pill:#1b1f25; --accent:#e5e7eb;
    --shadow:0 10px 30px rgba(0,0,0,.35);
  }

  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--fg);font:14px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
  a{color:#2563eb;text-decoration:none} a:hover{text-decoration:underline}

  /* Sticky toolbar */
  .bar{position:sticky;top:0;z-index:50;backdrop-filter:saturate(180%) blur(10px);
    background:color-mix(in oklab, var(--bg) 90%, transparent); border-bottom:1px solid var(--border)}
  .bar-inner{max-width:1100px;margin:0 auto;padding:12px 20px;display:grid;gap:10px;align-items:center}
  .title{font-weight:700;font-size:18px;grid-column:1/-1}
  .search{grid-column:1/-1;display:flex;gap:10px}
  .search input{width:100%}

  /* Row with: Table/Cards | filters | Sort | More */
  .bar-row-inline{display:grid;grid-template-columns:auto 1fr auto auto; gap:10px; align-items:center; grid-column:1/-1;}
  .seg{display:inline-flex;border:1px solid var(--border);border-radius:10px;overflow:hidden;box-shadow:var(--shadow)}
  .seg.fixed{width:var(--seg-w)} .seg.fixed button{flex:1 0 50%}
  .seg button{padding:8px 12px;border:0;background:var(--card);color:var(--fg);cursor:pointer}
  .seg button.active{background:var(--accent);color:var(--bg)}
  .btn{background:var(--card);color:var(--fg);border:1px solid var(--border);border-radius:10px;padding:10px 12px;cursor:pointer;box-shadow:var(--shadow)}
  .select,.input{padding:10px 12px;border:1px solid var(--border);border-radius:10px;background:var(--card);color:var(--fg);box-shadow:var(--shadow)}
  .select.fixed{width:var(--ctl-w)}
  .filters-inline{display:flex;gap:10px;align-items:center;flex:1;}
  .filters-inline .select{flex:1 1 0;min-width:160px;}
  .filters-inline .fixed{width:auto;}

  /* Pretty More menu */
  .menu{ position:relative; }
  .menu-panel{
    display:none; position:absolute; right:0; top:calc(100% + 8px);
    min-width:260px; background:var(--card); border:1px solid var(--border);
    border-radius:10px; padding:8px; box-shadow:var(--shadow); z-index:60;
  }
  .menu-panel.open{ display:block; }
  .menu-panel button, .menu-panel a{
    display:flex; align-items:center; gap:8px; width:100%;
    padding:10px; border:0; border-radius:8px; background:transparent; color:var(--fg);
    text-decoration:none; cursor:pointer;
  }
  .menu-panel button:hover, .menu-panel a:hover{ background:var(--pill); }

  /* Chips under toolbar */
  .wrap{max-width:1100px;margin:0 auto;padding:0 20px}
  .chips{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0}
  .chip{display:inline-flex;align-items:center;gap:6px}
  .chip button{all:unset;cursor:pointer;color:var(--muted)}
  .pill{ padding:4px 8px; font-size:11px; line-height:1; border:1px solid var(--border); border-radius:999px; background:var(--pill); }

  /* table */
  .table-wrap{margin-top:8px; overflow-x:auto; -webkit-overflow-scrolling:touch; background:var(--bg);}
  table{min-width:900px;width:100%;border-collapse:collapse}
  thead th{background:var(--bg)}
  th,td{padding:10px;border-bottom:1px solid var(--border);vertical-align:top;text-align:left}
  th.sortable{cursor:pointer;user-select:none}
  th .arrow{opacity:1;margin-left:6px;display:none}
  th.active .arrow{display:inline}

  /* Cards */
  .cards{display:grid;gap:12px;margin-top:12px;grid-template-columns:repeat(auto-fill,minmax(560px,1fr));}
  .card{background:var(--card);border:1px solid var(--border);border-radius:14px;box-shadow:var(--shadow);}
  .card--inline{display:flex;flex-direction:column;gap:6px;padding:12px 14px;}
  .date-line{display:flex;align-items:center;gap:8px;}
  .card-title{margin:0;font-weight:600;}
  .card-title a{color:inherit;text-decoration:none;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;}
  .card-title a:hover{text-decoration:underline;}
  .meta-line{display:flex;align-items:center;gap:8px;flex-wrap:wrap;}
  .kchip{ padding:3px 6px; font-size:11px; border:1px solid var(--border); border-radius:999px; background:var(--pill); }
  .score-txt{ color: var(--muted); font-size: 12px; }
  .date{ color:var(--muted); white-space:nowrap; }

  /* Tag color classes */
  .pill-link{ color:inherit; text-decoration:none; display:inline-block; }
  .tag--fashion{background:#fff1f2; border-color:#fecdd3; color:#9f1239}
  .tag--beauty{ background:#eef2ff;  border-color:#c7d2fe;  color:#3730a3}
  .tag--wellness{background:#ecfeff;border-color:#a5f3fc;color:#155e75}
  .status--emerging{background:#ecfccb;border-color:#bef264;color:#3f6212}
  .status--bubbling{background:#fef3c7;border-color:#fcd34d;color:#92400e}
  .status--mainstream{background:#f1f5f9;border-color:#cbd5e1;color:#334155}

  /* pager */
  .pager{display:flex;align-items:center;justify-content:space-between;margin:16px 0;gap:12px;flex-wrap:wrap}
  .pager-right{display:flex;align-items:center;gap:10px;flex-wrap:wrap}

  @media (max-width: 860px){
    .bar-inner{gap:8px}
    .bar-row-inline{grid-template-columns:1fr 1fr; grid-auto-rows:auto}
    .filters-inline{flex-wrap:wrap}
    .cards{grid-template-columns:1fr}
  }
</style>

<div class="bar" id="bar">
  <div class="bar-inner">
    <div class="title">The Futures Edit — Signals</div>

    <div class="search">
      <input id="q" class="input" type="search" placeholder="Search title / keyword / category / status…" />
    </div>

    <!-- Row: Table/Cards | Filters | Sort | More -->
    <div class="bar-row-inline">
      <div class="seg fixed">
        <button id="viewTable" class="active" type="button">Table</button>
        <button id="viewCards" type="button">Cards</button>
      </div>

      <div class="filters-inline">
        <select id="barCat" class="select fixed">
          <option value="">All categories</option>
          <option>fashion</option><option>beauty</option><option>wellness</option>
        </select>

        <select id="barStatus" class="select fixed">
          <option value="">All status</option>
          <option>emerging</option><option>bubbling</option><option>mainstream</option>
        </select>

        <select id="dateRange" class="select fixed" title="Date range">
          <option value="all" selected>All time</option>
          <option value="7">Last 7 days</option>
          <option value="30">Last 30 days</option>
          <option value="90">Last 90 days</option>
          <option value="365">Last year</option>
        </select>
      </div>

      <select id="sortKey" class="select fixed">
        <option value="published" selected>Sort: Published</option>
        <option value="trend_score">Sort: Trend score</option>
        <option value="title">Sort: Title</option>
        <option value="category">Sort: Category</option>
        <option value="primary_keyword">Sort: Keyword</option>
        <option value="status">Sort: Status</option>
      </select>

      <div class="menu">
        <button class="btn" id="moreBtn" aria-haspopup="true" aria-expanded="false">More</button>
        <div class="menu-panel" id="moreMenu" role="menu">
          <a href="signals_simple.csv" download>Download CSV</a>
          <button id="copyFiltered">Copy filtered CSV</button>
          <button id="copyShare">Copy share link</button>
          <button id="darkToggle">Toggle dark mode</button>
          <a href="https://atelierfutures.github.io/futures-edit-signals/advanced.html" target="_blank" rel="noopener">Advanced Analytics</a>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- rest of your table + JS stays the same -->
